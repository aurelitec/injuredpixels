@import "tailwindcss";

@theme {
  /* =========================
     UI COLORS
     ========================= */

  /* Panel backgrounds */
  --color-panel-swatch: #f0f0f0;
  --color-panel-toolbar: #1a1a1a;

  /* Toolbar buttons */
  --color-toolbar-text: #ffffff;
  --color-toolbar-hover: rgba(255, 255, 255, 0.1);
  --color-toolbar-active: rgba(255, 255, 255, 0.15);

  /* Toast */
  --color-toast-bg: rgba(0, 0, 0, 0.8);
  --color-toast-text: #ffffff;

  /* Help dialog */
  --color-dialog-bg: #ffffff;
  --color-dialog-backdrop: rgba(0, 0, 0, 0.5);

  /* Swatch borders */
  --color-swatch-border: rgba(0, 0, 0, 0.2);

  /* Selected swatch ring — neutral gray visible against all swatch colors on #f0f0f0 panel */
  --color-swatch-selected: #858585;

  /* Focus ring — neutral to avoid clashing with colored swatches; lighter than selection ring */
  --color-focus-ring: #bbbbbb;

  /* =========================
     SHADOWS
     ========================= */

  /* Dark shadow for light backgrounds + gray glow for visibility on dark test colors (Black, Blue) */
  --shadow-surface: 0 8px 32px rgba(0, 0, 0, 0.3), 0 2px 8px rgba(0, 0, 0, 0.2), 0 0 16px rgba(128, 128, 128, 0.4);

  --shadow-toast: 0 4px 12px rgba(0, 0, 0, 0.15);

  /* Inset shadow on selected swatch for a pressed/recessed look */
  --shadow-swatch-selected: inset 0 2px 4px rgba(0, 0, 0, 0.3);

  /* =========================
     SPACING (--spacing-* → gap-*, p-*, m-*)
     ========================= */

  --spacing-swatch-gap: 1rem;
  --spacing-panel-padding: 1.5rem;

  /* =========================
     SIZING (--width-* → w-*, --height-* → h-*)
     ========================= */

  --width-swatch: 5rem;
  --height-swatch: 5rem;
  --min-width-swatch: 3rem;
  --min-height-swatch: 3rem;

  /* =========================
     BORDER RADIUS
     ========================= */

  --radius-panel: 0.375rem;
  --radius-toast: 0.5rem;
  --radius-button: 0.25rem;
  --radius-swatch: 0.125rem;
}

/* =========================
   BODY BACKGROUND COLORS
   ========================= */

body {
  @apply min-h-screen flex items-center justify-center;
}

body[data-color-index="0"] { @apply bg-[#FF0000]; } /* Red */
body[data-color-index="1"] { @apply bg-[#00FF00]; } /* Green */
body[data-color-index="2"] { @apply bg-[#0000FF]; } /* Blue */
body[data-color-index="3"] { @apply bg-[#00FFFF]; } /* Cyan */
body[data-color-index="4"] { @apply bg-[#FF00FF]; } /* Magenta */
body[data-color-index="5"] { @apply bg-[#FFFF00]; } /* Yellow */
body[data-color-index="6"] { @apply bg-[#000000]; } /* Black */
body[data-color-index="7"] { @apply bg-[#FFFFFF]; } /* White */

/* =========================
   COMPONENT CLASSES
   ========================= */

@layer components {
  /* Color swatch button */
  .color-swatch {
    @apply flex items-center justify-center
           h-12 w-12 min-h-swatch min-w-swatch
           rounded-swatch border border-swatch-border
           focus:outline-none focus-visible:ring-2 focus-visible:ring-focus-ring focus-visible:ring-offset-2
           sm:h-16 sm:w-16 lg:h-swatch lg:w-swatch;
  }

  .color-swatch.selected {
    @apply shadow-[0_0_0_3px_var(--color-swatch-selected)];
  }

  .color-swatch-label {
    @apply text-[0.5rem] font-medium select-none
           sm:text-xs sm:font-semibold lg:font-bold lg:text-sm;
  }

  /* Toolbar button */
  .toolbar-btn {
    @apply flex items-center gap-2
           rounded-button px-3 py-2
           text-sm font-medium text-toolbar-text
           transition-colors
           hover:bg-toolbar-hover active:bg-toolbar-active
           focus:outline-none focus-visible:ring-2 focus-visible:ring-focus-ring focus-visible:ring-offset-2 focus-visible:ring-offset-panel-toolbar;
  }

  .toolbar-btn-icon {
    @apply text-xl md:text-lg;
  }

  .toolbar-btn-label {
    @apply hidden md:inline;
  }

  /* Help dialog shortcut row */
  .shortcut-row {
    @apply flex justify-between gap-4;
  }

  .shortcut-key {
    @apply font-mono text-gray-500 shrink-0;
  }

  .shortcut-desc {
    @apply text-gray-700 text-right;
  }

  /* Section header in help dialog */
  .shortcut-section {
    @apply text-xs font-semibold text-gray-400 uppercase tracking-wide mt-4 mb-2 first:mt-0;
  }

  /* =========================
     CONTROL PANEL
     ========================= */

  /* Panel - centered by body flex */
  .control-panel {
    @apply rounded-panel shadow-surface
           transition-[opacity,transform] duration-[250ms] ease-out;
  }

  /* Hidden state - faster exit animation */
  .control-panel.hidden {
    @apply opacity-0 scale-95 pointer-events-none
           duration-[150ms] ease-in;
  }

  /* =========================
     HELP DIALOG (native <dialog>)
     ========================= */

  .help-dialog {
    @apply m-auto w-96 rounded-panel shadow-surface;
  }

  /* Native ::backdrop pseudo-element */
  .help-dialog::backdrop {
    @apply bg-dialog-backdrop;
  }

  /* =========================
     TOAST (popover)
     ========================= */

  /* Override popover defaults: inset:0 and margin:auto center it */
  /* Don't set display here - popover uses display:none by default */
  .toast {
    @apply inset-auto m-0 fixed bottom-8 left-1/2 -translate-x-1/2
           w-fit
           bg-toast-bg text-toast-text px-4 py-3 rounded-toast shadow-toast select-none
           max-w-[calc(100vw-2rem)] border-0;
  }

  /* Only apply flex when popover is open */
  .toast:popover-open {
    @apply flex items-center gap-3;
  }
}

/* =========================
   REDUCED MOTION
   ========================= */

@media (prefers-reduced-motion: reduce) {
  .control-panel-inner,
  .help-dialog-backdrop,
  .help-dialog-inner,
  .toast {
    @apply transition-none;
  }
}
