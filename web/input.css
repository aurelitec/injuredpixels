@import "tailwindcss";

@theme {
  /**
   * UI Colors
   */

  /* Panel backgrounds */
  --color-panel-swatch: #f0f0f0;
  --color-panel-toolbar: #1a1a1a;

  /* Toolbar buttons */
  --color-toolbar-text: #ffffff;
  --color-toolbar-hover: rgba(255, 255, 255, 0.1);
  --color-toolbar-active: rgba(255, 255, 255, 0.15);

  /* Toast */
  --color-toast-bg: rgba(0, 0, 0, 0.8);
  --color-toast-text: #ffffff;

  /* Help dialog */
  --color-help-dialog-bg: #f0f0f0;
  --color-help-dialog-backdrop: rgba(0, 0, 0, 0.5);

  /* Swatch borders */
  --color-swatch-border: rgba(0, 0, 0, 0.2);

  /* Selected swatch ring — neutral gray visible against all swatch colors on #f0f0f0 panel */
  --color-swatch-selected: #858585;

  /* Focus ring — neutral to avoid clashing with colored swatches; lighter than selection ring */
  --color-focus-ring: #bbbbbb;

  /**
   * Shadows
   */

  /* Dark shadow for light backgrounds + gray glow for visibility on dark test colors (Black, Blue) */
  --shadow-surface: 0 8px 32px rgba(0, 0, 0, 0.3), 0 2px 8px rgba(0, 0, 0, 0.2), 0 0 16px rgba(128, 128, 128, 0.4);

  --shadow-toast: 0 4px 12px rgba(0, 0, 0, 0.15);

  /**
   * Spacing
   */

  --spacing-panel-padding: 1.5rem;
  --spacing-swatch-gap: 1rem;

  /**
   * Sizing
   */

  --height-swatch: 5rem;
  --min-height-swatch: 3rem;
  --min-width-swatch: 3rem;
  --width-swatch: 5rem;

  /**
   * Border radius
   */

  --radius-button: 0.25rem;
  --radius-panel: 0.375rem;
  --radius-swatch: 0.125rem;
  --radius-toast: 0.5rem;
}

@layer components {
  /* ---------------------------------------------------------------------- */
  /* Control Panel                                                          */
  /* ---------------------------------------------------------------------- */

  /* Panel - centered by body flex */
  .control-panel {
    @apply rounded-panel shadow-surface transition-[opacity,transform] duration-250 ease-out;
  }

  /* Hidden state - faster exit animation */
  .control-panel.is-hidden {
    @apply pointer-events-none scale-95 opacity-0 duration-150 ease-in;
  }

  /* Color swatch button */

  .color-swatch {
    @apply flex h-12 min-h-swatch w-12 min-w-swatch items-center justify-center rounded-swatch border border-swatch-border focus:outline-none focus-visible:ring-2 focus-visible:ring-focus-ring focus-visible:ring-offset-2 sm:h-16 sm:w-16 lg:h-swatch lg:w-swatch;
  }

  .color-swatch.selected {
    @apply shadow-[0_0_0_3px_var(--color-swatch-selected)];
  }

  .color-swatch-label {
    @apply text-[0.5rem] font-medium sm:text-xs sm:font-semibold lg:text-sm lg:font-bold;
  }

  /* Toolbar button */

  .toolbar-btn {
    @apply flex items-center gap-2 rounded-button px-3 py-2 text-sm font-medium text-toolbar-text transition-colors hover:bg-toolbar-hover focus:outline-none focus-visible:ring-2 focus-visible:ring-focus-ring focus-visible:ring-offset-2 focus-visible:ring-offset-panel-toolbar active:bg-toolbar-active;
  }

  .toolbar-btn-icon {
    @apply text-xl md:text-lg;
  }

  .toolbar-btn-label {
    @apply hidden md:inline;
  }

  /* ---------------------------------------------------------------------- */
  /* Help Dialog (native <dialog>)                                          */
  /* ---------------------------------------------------------------------- */

  .help-dialog {
    @apply m-auto w-96 scale-95 rounded-panel opacity-0 shadow-surface;
    @apply transition-[opacity,transform,display] transition-discrete duration-150 ease-in;
  }

  .help-dialog[open] {
    @apply scale-100 opacity-100 duration-250 ease-out;

    @starting-style {
      @apply scale-95 opacity-0;
    }
  }

  .help-dialog::backdrop {
    @apply bg-help-dialog-backdrop opacity-0;
    @apply transition-[opacity,display] transition-discrete duration-150 ease-in;
  }

  .help-dialog[open]::backdrop {
    @apply opacity-100 duration-250 ease-out;

    @starting-style {
      @apply opacity-0;
    }
  }

  /* Help dialog shortcut row */

  .shortcut-row {
    @apply flex justify-between gap-4;
  }

  .shortcut-key {
    @apply shrink-0 font-mono text-gray-500;
  }

  .shortcut-desc {
    @apply text-right text-gray-700;
  }

  /* Section header in help dialog */
  .shortcut-section {
    @apply mt-4 mb-2 text-xs font-semibold tracking-wide text-gray-400 uppercase first:mt-0;
  }

  /* ---------------------------------------------------------------------- */
  /* Toast (popover)                                                        */
  /* ---------------------------------------------------------------------- */

  .toast {
    @apply mx-auto mt-auto mb-8 rounded-toast bg-toast-bg px-4 py-3 text-toast-text opacity-0 translate-y-2 shadow-toast;
    @apply transition-[opacity,transform,display] transition-discrete duration-150 ease-in;
  }

  .toast:popover-open {
    @apply flex items-center gap-3;
    @apply translate-y-0 opacity-100 duration-200 ease-out;

    @starting-style {
      @apply translate-y-2 opacity-0;
    }
  }
}

/* ------------------------------------------------------------------------ */
/* Reduced Motion                                                           */
/* ------------------------------------------------------------------------ */

@media (prefers-reduced-motion: reduce) {
  .control-panel, .help-dialog::backdrop, .help-dialog, .toast {
    @apply transition-none;
  }
}
